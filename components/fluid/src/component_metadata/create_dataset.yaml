# PIPELINE DEFINITION
# Name: create-dataset
# Inputs:
#    cred_secret_name: str
#    cred_secret_options: dict
#    dataset_name: str
#    mode: str [Default: 'ReadOnly']
#    mount_name: str
#    mount_path: str
#    mount_point: str
#    namespace: str
#    options: dict
components:
  comp-create-dataset:
    executorLabel: exec-create-dataset
    inputDefinitions:
      parameters:
        cred_secret_name:
          description: Name of the secret which is used to access external storage
            (e.g. S3). Defaults to None.
          isOptional: true
          parameterType: STRING
        cred_secret_options:
          description: "Contents in secret `<cred_secret_name>`. Defaults to None.\n\
            E.g. If you create a secret to access S3 with AlluxioRuntime like:\n```yaml\n\
            apiVersion: v1\nkind: Secret\nmetadata:\n  name: s3-secret\nstringData:\n\
            \  s3-accessKeyId: <your-access-key-id>\n  s3-secretKey: <your-secret-key>\n\
            ```\nYou should set `cred_secret_name` and `cred_secret_options` to:\n\
            ```python\ncred_secret_name = \"s3-secret\"\ncred_secret_options = {\n\
            \    \"s3a.accessKeyId\": \"s3-accessKeyId\",\n    \"s3a.secretKey\":\
            \ \"s3-secretKey\"\n}\n```\nNote that you should set `cred_secret_name`\
            \ and `cred_secret_options` together."
          isOptional: true
          parameterType: STRUCT
        dataset_name:
          description: Name of the Dataset.
          parameterType: STRING
        mode:
          defaultValue: ReadOnly
          description: Mode of this Dataset. Must be one of ["ReadOnly", "ReadWrite"].
            Defaults to "ReadOnly".
          isOptional: true
          parameterType: STRING
        mount_name:
          description: Name of this mount. When this field is None, it will be set
            to `dataset_name`. Defaults to None.
          isOptional: true
          parameterType: STRING
        mount_path:
          description: Path to mount in cache runtime. When this field is None, the
            mount path will be set to `/<mount_name>`. Defaults to None.
          isOptional: true
          parameterType: STRING
        mount_point:
          description: 'Mount point of the source.

            E.g. use `s3://your-bucket` to mount a S3 bucket.'
          parameterType: STRING
        namespace:
          description: Namespace of the Dataset.
          parameterType: STRING
        options:
          description: "Options which can be used in cache runtime. Defaults to None.\n\
            E.g. you can set Alluxio configurations in this field if you will bind\
            \ this Dataset to AlluxioRuntime:\n```python\noptions = {\n    \"alluxio.underfs.s3.endpoint\"\
            : \"https://your-s3-endpoint\",\n    \"alluxio.underfs.s3.endpoint.region\"\
            : \"your-s3-region\"\n}\n``` "
          isOptional: true
          parameterType: STRUCT
deploymentSpec:
  executors:
    exec-create-dataset:
      container:
        args:
        - --executor_input
        - '{{$}}'
        - --function_to_execute
        - create_dataset
        command:
        - python3
        - -m
        - kfp.dsl.executor_main
        image: fluidcloudnative/fluid-pipline-components:v0.0.1
pipelineInfo:
  name: create-dataset
root:
  dag:
    tasks:
      create-dataset:
        cachingOptions:
          enableCache: true
        componentRef:
          name: comp-create-dataset
        inputs:
          parameters:
            cred_secret_name:
              componentInputParameter: cred_secret_name
            cred_secret_options:
              componentInputParameter: cred_secret_options
            dataset_name:
              componentInputParameter: dataset_name
            mode:
              componentInputParameter: mode
            mount_name:
              componentInputParameter: mount_name
            mount_path:
              componentInputParameter: mount_path
            mount_point:
              componentInputParameter: mount_point
            namespace:
              componentInputParameter: namespace
            options:
              componentInputParameter: options
        taskInfo:
          name: create-dataset
  inputDefinitions:
    parameters:
      cred_secret_name:
        description: Name of the secret which is used to access external storage (e.g.
          S3). Defaults to None.
        isOptional: true
        parameterType: STRING
      cred_secret_options:
        description: "Contents in secret `<cred_secret_name>`. Defaults to None.\n\
          E.g. If you create a secret to access S3 with AlluxioRuntime like:\n```yaml\n\
          apiVersion: v1\nkind: Secret\nmetadata:\n  name: s3-secret\nstringData:\n\
          \  s3-accessKeyId: <your-access-key-id>\n  s3-secretKey: <your-secret-key>\n\
          ```\nYou should set `cred_secret_name` and `cred_secret_options` to:\n```python\n\
          cred_secret_name = \"s3-secret\"\ncred_secret_options = {\n    \"s3a.accessKeyId\"\
          : \"s3-accessKeyId\",\n    \"s3a.secretKey\": \"s3-secretKey\"\n}\n```\n\
          Note that you should set `cred_secret_name` and `cred_secret_options` together."
        isOptional: true
        parameterType: STRUCT
      dataset_name:
        description: Name of the Dataset.
        parameterType: STRING
      mode:
        defaultValue: ReadOnly
        description: Mode of this Dataset. Must be one of ["ReadOnly", "ReadWrite"].
          Defaults to "ReadOnly".
        isOptional: true
        parameterType: STRING
      mount_name:
        description: Name of this mount. When this field is None, it will be set to
          `dataset_name`. Defaults to None.
        isOptional: true
        parameterType: STRING
      mount_path:
        description: Path to mount in cache runtime. When this field is None, the
          mount path will be set to `/<mount_name>`. Defaults to None.
        isOptional: true
        parameterType: STRING
      mount_point:
        description: 'Mount point of the source.

          E.g. use `s3://your-bucket` to mount a S3 bucket.'
        parameterType: STRING
      namespace:
        description: Namespace of the Dataset.
        parameterType: STRING
      options:
        description: "Options which can be used in cache runtime. Defaults to None.\n\
          E.g. you can set Alluxio configurations in this field if you will bind this\
          \ Dataset to AlluxioRuntime:\n```python\noptions = {\n    \"alluxio.underfs.s3.endpoint\"\
          : \"https://your-s3-endpoint\",\n    \"alluxio.underfs.s3.endpoint.region\"\
          : \"your-s3-region\"\n}\n``` "
        isOptional: true
        parameterType: STRUCT
schemaVersion: 2.1.0
sdkVersion: kfp-2.7.0
