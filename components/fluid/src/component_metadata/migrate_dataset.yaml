# PIPELINE DEFINITION
# Name: migrate-dataset
# Inputs:
#    dataset_name: str
#    external_storage_encrypt_options: dict
#    external_storage_uri: str
#    migrate_direction: str
#    migrate_path: str
#    namespace: str
components:
  comp-migrate-dataset:
    executorLabel: exec-migrate-dataset
    inputDefinitions:
      parameters:
        dataset_name:
          description: Name of the Dataset.
          parameterType: STRING
        external_storage_encrypt_options:
          description: Encrypt options used to access the external storage. Defaults
            to None.
          isOptional: true
          parameterType: STRUCT
        external_storage_uri:
          description: External storage uri used for migration.
          parameterType: STRING
        migrate_direction:
          description: 'The direction of migration. Must be either "from" or "to".

            "from" means migrate from external storage to the Dataset. "to" means
            migrate from the Dataset to external storage.'
          parameterType: STRING
        migrate_path:
          description: Path to be migrated.
          parameterType: STRING
        namespace:
          description: Namespace of the Dataset.
          parameterType: STRING
deploymentSpec:
  executors:
    exec-migrate-dataset:
      container:
        args:
        - --executor_input
        - '{{$}}'
        - --function_to_execute
        - migrate_dataset
        command:
        - python3
        - -m
        - kfp.dsl.executor_main
        image: fluidcloudnative/fluid-pipline-components:v0.0.1
pipelineInfo:
  name: migrate-dataset
root:
  dag:
    tasks:
      migrate-dataset:
        cachingOptions:
          enableCache: true
        componentRef:
          name: comp-migrate-dataset
        inputs:
          parameters:
            dataset_name:
              componentInputParameter: dataset_name
            external_storage_encrypt_options:
              componentInputParameter: external_storage_encrypt_options
            external_storage_uri:
              componentInputParameter: external_storage_uri
            migrate_direction:
              componentInputParameter: migrate_direction
            migrate_path:
              componentInputParameter: migrate_path
            namespace:
              componentInputParameter: namespace
        taskInfo:
          name: migrate-dataset
  inputDefinitions:
    parameters:
      dataset_name:
        description: Name of the Dataset.
        parameterType: STRING
      external_storage_encrypt_options:
        description: Encrypt options used to access the external storage. Defaults
          to None.
        isOptional: true
        parameterType: STRUCT
      external_storage_uri:
        description: External storage uri used for migration.
        parameterType: STRING
      migrate_direction:
        description: 'The direction of migration. Must be either "from" or "to".

          "from" means migrate from external storage to the Dataset. "to" means migrate
          from the Dataset to external storage.'
        parameterType: STRING
      migrate_path:
        description: Path to be migrated.
        parameterType: STRING
      namespace:
        description: Namespace of the Dataset.
        parameterType: STRING
schemaVersion: 2.1.0
sdkVersion: kfp-2.7.0
